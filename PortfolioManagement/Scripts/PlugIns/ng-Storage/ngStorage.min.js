(function(n,t){"use strict";if(typeof define=="function"&&define.amd)define("ngStorage",["angular"],function(n){return t(n)});else return t(n)})(typeof angular=="undefined"?null:angular,function(n){"use strict";function t(t){return["$rootScope","$window","$log","$timeout",function(i,r,u,f){function v(n){var t,i;try{t=r[n]}catch(u){t=!1}if(t&&n==="localStorage"){i="__"+Math.round(Math.random()*1e7);try{localStorage.setItem(i,i);localStorage.removeItem(i)}catch(u){t=!1}}return t}var o=v(t)||(u.warn("This browser does not support Web Storage!"),{setItem:function(){},getItem:function(){}}),e={$default:function(t){for(var i in t)n.isDefined(e[i])||(e[i]=t[i]);return e},$reset:function(n){for(var t in e)"$"===t[0]||delete e[t]&&o.removeItem("ngStorage-"+t);return e.$default(n)}},s,l,h,a,c;try{o=r[t];o.length}catch(y){u.warn("This browser does not support Web Storage!");o={}}for(h=0,a=o.length;h<a;h++)(c=o.key(h))&&"ngStorage-"===c.slice(0,10)&&(e[c.slice(10)]=n.fromJson(o.getItem(c)));return s=n.copy(e),i.$watch(function(){var t;l||(l=f(function(){if(l=null,!n.equals(e,s)){t=n.copy(s);n.forEach(e,function(i,r){n.isDefined(i)&&"$"!==r[0]&&o.setItem("ngStorage-"+r,n.toJson(i));delete t[r]});for(var i in t)o.removeItem("ngStorage-"+i);s=n.copy(e)}},100,!1))}),"localStorage"===t&&r.addEventListener&&r.addEventListener("storage",function(t){"ngStorage-"===t.key.slice(0,10)&&(t.newValue?e[t.key.slice(10)]=n.fromJson(t.newValue):delete e[t.key.slice(10)],s=n.copy(e),i.$apply())}),e}]}n.module("ngStorage",[]).factory("$localStorage",t("localStorage")).factory("$sessionStorage",t("sessionStorage"))});
//# sourceMappingURL=ngStorage.min.js.map
